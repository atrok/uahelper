define(["handlebars"], function(Handlebars) { return Handlebars.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<script src=\"/assets/js/socket.io.js \"></script>\r\n<script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"></script>\r\n<script type=\"text/javascript\" src=\"/assets/js/loading-bar.min.js\"></script>\r\n<script>\r\n\r\n\r\n\r\n    // function to hide and show progress bar and other elements\r\n    (function ($) {\r\n        $.fn.invisible = function () {\r\n            return this.css(\"visibility\", \"hidden\");\r\n        };\r\n        $.fn.visible = function () {\r\n            return this.css(\"visibility\", \"visible\");\r\n        };\r\n    })(jQuery);\r\n\r\n\r\n\r\n\r\n    var socket = io.connect('http://192.168.14.91:5000/prepareadvisory');\r\n\r\n    var bar1 = new ldBar(\"#myItem1\");\r\n    //var bar2 = document.getElementById('myItem1').ldBar;\r\n\r\n    var id;\r\n    socket.on('connected', function (data) {\r\n        console.log(data);\r\n        id = data.id;\r\n        socket.emit('tasks', {});\r\n    });\r\n\r\n    socket.on('progress', function (data) {\r\n        console.log(data.percents);\r\n        bar1.set(data.percents);\r\n    })\r\n\r\n    socket.on('result', function (data) {\r\n        console.log(data);\r\n        $(\"#div_result #resultsTable\").empty();\r\n\r\n        Object.keys(data).forEach((key) => { $(\"#div_result #result\").append(data[key]); })\r\n\r\n        $('.tableresultheader').click(function () {\r\n            $header = $(this);\r\n            $content = $header.next();\r\n            $content.slideToggle(500, function () {\r\n                $header.text(function () {\r\n                    return $content.is(':visible') ? 'Collapse' : 'Expand';\r\n                });\r\n            });\r\n        });\r\n\r\n\r\n    })\r\n\r\n    socket.on('console', function (data) {\r\n        console.log(data);\r\n        //$(\"#div_result\").empty();\r\n        Object.keys(data).forEach((key) => { $(\"#div_result #console\").append(data[key]); })\r\n\r\n\r\n    })\r\n\r\n    socket.on('errors', function (data) {\r\n        console.log(data);\r\n        //$(\"#div_result\").empty();\r\n        lotsoferrors(data);\r\n\r\n\r\n    })\r\n\r\n    socket.on('done', function (data) {\r\n        done();\r\n    })\r\n\r\n    socket.on('validation', function (data) {\r\n        console.log(data);\r\n        $(':submit').attr('disabled', 'disabled');\r\n        if (data.submitted) {\r\n            $(\"#div_result #console\").append(data.reason);\r\n        } else {\r\n            lotsoferrors(data.reason)\r\n            done();\r\n        }\r\n    })\r\n\r\n    socket.on('tasks', function (data) {\r\n        console.log('Got list of tasks');\r\n        if (data instanceof Array) {\r\n            data.forEach((item) => {\r\n                $('#tasks').append(\r\n                    '<tr id=\"' + item.id + '\">'\r\n                    + '<td><input type=\"checkbox\" id=\"' + item.id + '\" /></td>'\r\n                    + '<td>' + item.time.toString() + '</td>'\r\n                    + '<td>' + item.input.toString() + '</td>'\r\n                    + '<td>' + item.link.toString() + '</td>'\r\n                    + '</tr>'\r\n                )\r\n            })\r\n            $(document).ready(function () {\r\n                $(\".getresult\").click(function () {\r\n                    var id = this.id;\r\n                    submitData('getresults', { 'id': id })\r\n                });\r\n            });\r\n        }\r\n    })\r\n\r\n    socket.on('deleted', function (data) {\r\n        console.log('Record deleted: ', data.id);\r\n        $('tr#' + data.id).remove();\r\n    })\r\n\r\n    $(\"#form_dbs\").submit(function () {\r\n        try {\r\n            var args = {};\r\n            var errors = []\r\n            args.dbtype = $(\"select option:selected\").attr(\"value\");\r\n\r\n            args.host = (checkField($(\"#host\").val(), 100)) ? $(\"#host\").val() : errors.push('Host can\\'t be longer than 100');\r\n            args.dbname = (checkField($(\"#dbname\").val(), 100)) ? $(\"#dbname\").val() : errors.push('DB name can\\t be longer than 100');\r\n            args.user = (checkField($(\"#user\").val(), 100)) ? $(\"#user\").val() : errors.push('User can\\'t be longer than 100');\r\n            args.pass = (checkField($(\"#pass\").val(), 25)) ? $(\"#pass\").val() : errors.push('Password can\\'t be longer than 25');\r\n\r\n            var res = {};\r\n            res.form = 'form_dbs';\r\n            res.args = args;\r\n            if (!lotsoferrors(errors))\r\n                submitData('my other event', res);\r\n\r\n\r\n            //alert(args);;\r\n\r\n        } catch (e) {\r\n            console.log(e.stack);\r\n        } finally {\r\n            return false; // to avoid page reload\r\n        } // to avoid page reload\r\n\r\n    })\r\n    $(\"#form_comp\").submit(function () {\r\n        try {\r\n            var args = {};\r\n            var errors = []\r\n            args.apptype = $(\"#apptype option:selected\").attr(\"value\");\r\n            args.ostype = $(\"#ostype option:selected\").attr(\"value\");\r\n\r\n            args.release = (checkField($(\"#release\").val(), 10)) ? $(\"#release\").val() : errors.push('Release can\\'t be longer than 10');\r\n            var res = {}\r\n            res.form = 'form_comp';\r\n            res.args = args;\r\n            if (!lotsoferrors(errors)) {\r\n                submitData('search', res);\r\n\r\n            }\r\n\r\n        } catch (e) {\r\n            console.log(e.stack);\r\n        } finally {\r\n            return false; // to avoid page reload\r\n        } // to avoid page reload\r\n\r\n    })\r\n\r\n    $(\"#form_tasks\").submit(function () {\r\n        try {\r\n            var args = {};\r\n            var errors = []\r\n            args = checkedValues(\"#form_tasks input:checkbox:checked\");\r\n\r\n\r\n\r\n            submitData('deleteresults', args);\r\n            //alert(args);;\r\n\r\n        } catch (e) {\r\n            console.log(e.stack);\r\n        } finally {\r\n            return false; // to avoid page reload\r\n        } // to avoid page reload\r\n\r\n    })\r\n\r\n    function done() {\r\n        $(':submit').removeAttr('disabled');\r\n        $('div #myItem1').invisible();\r\n    }\r\n    function submitData(channel, data) {\r\n        socket.emit(channel, data);\r\n        $('div #myItem1').visible();\r\n    }\r\n    var checkField = function (text, condition) {\r\n        return (text.length > condition) ? false : true;\r\n    }\r\n\r\n    var lotsoferrors = function (errors) {\r\n        var err;\r\n        if (errors instanceof Array) {\r\n            err = errors;\r\n        } else {// object kv pairs\r\n            err = [];\r\n            Object.keys(errors).forEach((k) => {\r\n\r\n                err.push('<span class=\"error\">' + k + ':</span> ' + errors[k]);\r\n            })\r\n\r\n        }\r\n        if (err.length > 0) {\r\n            $(\"#form_errors\").empty();\r\n\r\n            $(\"#form_errors\").append('<div id=\"errors\"><h3>Error!</h3><span onclick=\"this.parentElement.style.display=\\'none\\'\"  class=\"w3-button w3-display-topright\">X</span></div>');\r\n            var s;\r\n            err.forEach((val) => { $(\"#errors\").append(val + '<br/>') });\r\n            return true;\r\n\r\n        } else {\r\n            $(\"#errors\").remove();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkedValues = function (name) {\r\n        return $(name).map(function () {\r\n            return this.id;\r\n        }).get();\r\n    }\r\n\r\n    function openTab(evt, tabName) {\r\n        var i;\r\n        var x = document.getElementsByClassName(\"tab\");\r\n        for (i = 0; i < x.length; i++) {\r\n            x[i].style.display = \"none\";\r\n        }\r\n\r\n        tablinks = document.getElementsByClassName(\"tablink\");\r\n        for (i = 0; i < x.length; i++) {\r\n            tablinks[i].className = tablinks[i].className.replace(\" w3-red\", \"\");\r\n        }\r\n        document.getElementById(tabName).style.display = \"block\";\r\n        evt.currentTarget.className += \" w3-red\";\r\n    }\r\n\r\n</script>";
},"useData":true}); });